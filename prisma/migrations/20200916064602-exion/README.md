# Migration `20200916064602-exion`

This migration has been generated by 권수현 at 9/16/2020, 3:46:02 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `exion`.`Schedule` (
`id` int  NOT NULL  AUTO_INCREMENT,
`step` ENUM('screening', 'toBeShooting', 'inShooting', 'shootingComplete', 'paymentCompleted')  NOT NULL ,
`shootingId` int  NOT NULL ,
`userId` int  NOT NULL ,
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `exion`.`Shooting` (
`id` int  NOT NULL  AUTO_INCREMENT,
`title` varchar(191)  ,
`producer` varchar(191)  ,
`shootingStartAt` datetime(3)  ,
`shootingEndAt` datetime(3)  ,
`content` varchar(191)  ,
`wage` int  ,
`gender` ENUM('male', 'female')  ,
`height` int  ,
`weight` int  ,
`isGlasses` boolean  ,
`isTattoo` boolean  ,
`isDyeing` boolean  ,
`createdAt` datetime(3)  DEFAULT CURRENT_TIMESTAMP(3),
`updatedAt` datetime(3)  DEFAULT CURRENT_TIMESTAMP(3),
`deletedAt` datetime(3)  ,
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `exion`.`Bookmark` (
`userId` int  NOT NULL ,
`shootingId` int  NOT NULL ,
PRIMARY KEY (`userId`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `exion`.`Schedule` ADD FOREIGN KEY (`userId`) REFERENCES `exion`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `exion`.`Schedule` ADD FOREIGN KEY (`shootingId`) REFERENCES `exion`.`Shooting`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `exion`.`Bookmark` ADD FOREIGN KEY (`userId`) REFERENCES `exion`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `exion`.`Bookmark` ADD FOREIGN KEY (`shootingId`) REFERENCES `exion`.`Shooting`(`id`) ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200915083228-exion..20200916064602-exion
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
 model Profile {
   id                Int                 @default(autoincrement()) @id
@@ -18,9 +18,9 @@
 model User {    
   id                Int                 @default(autoincrement()) @id
   phoneNumber       String?             @unique
   password          String?       
-  name              String?       
+  name              String?
   photoURL          String?       
   photoURL2         String?       
   birthday          DateTime?       
   gender            User_gender?        
@@ -35,8 +35,43 @@
   lastSignedIn      DateTime?
   profile           Profile?
 }
+model Schedule {
+  id                Int                 @default(autoincrement()) @id  
+  step              Step
+  shootingId        Int                 
+  userId            Int
+  User              User                @relation(fields: [userId], references: [id])
+  Shooting          Shooting            @relation(fields: [shootingId], references: [id])
+}
+
+model Shooting {
+  id                Int                 @default(autoincrement()) @id   
+  title             String?
+  producer          String?
+  shootingStartAt   DateTime?
+  shootingEndAt     DateTime?
+  content           String?  
+  wage              Int?
+  gender            User_gender?        
+  height            Int?        
+  weight            Int?        
+  isGlasses         Boolean?        
+  isTattoo          Boolean?        
+  isDyeing          Boolean? 
+  createdAt         DateTime?           @default(now())
+  updatedAt         DateTime?           @default(now()) @updatedAt
+  deletedAt         DateTime?
+}
+
+model Bookmark {
+  userId            Int                 @id
+  shootingId        Int                 
+  User              User                @relation(fields: [userId], references: [id])
+  Shooting          Shooting            @relation(fields: [shootingId], references: [id])
+}
+
 enum Profile_authType {
   email
   facebook
   google
@@ -46,4 +81,12 @@
 enum User_gender {
   male
   female
 }
+
+enum Step {
+  screening 
+  toBeShooting
+  inShooting
+  shootingComplete
+  paymentCompleted
+}
```


