# Migration `20200915024348-exion`

This migration has been generated by 권수현 at 9/15/2020, 11:43:48 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `exion`.`Profile` (
`id` int  NOT NULL  AUTO_INCREMENT,
`socialId` varchar(191)  ,
`authType` ENUM('email', 'facebook', 'google', 'apple')  ,
`userId` int  NOT NULL ,
UNIQUE Index `Profile.userId_unique`(`userId`),
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `exion`.`User` (
`id` int  NOT NULL  AUTO_INCREMENT,
`name` varchar(191)  ,
`phoneNumber` varchar(191)  ,
`password` varchar(191)  ,
`birthday` datetime(3)  ,
`gender` ENUM('male', 'female')  ,
`height` int  ,
`weight` int  ,
`isGlasses` boolean  ,
`isTattoo` boolean  ,
`isDyeing` boolean  ,
`createdAt` datetime(3)  DEFAULT CURRENT_TIMESTAMP(3),
`updatedAt` datetime(3)  DEFAULT CURRENT_TIMESTAMP(3),
`deletedAt` datetime(3)  ,
UNIQUE Index `User.phoneNumber_unique`(`phoneNumber`),
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `exion`.`Profile` ADD FOREIGN KEY (`userId`) REFERENCES `exion`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200915022446-exion..20200915024348-exion
--- datamodel.dml
+++ datamodel.dml
@@ -3,45 +3,44 @@
 }
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
-enum Gender {
-  male
-  female
+model Profile {
+  id       Int               @default(autoincrement()) @id
+  socialId String?
+  authType Profile_authType?
+  userId   Int            @unique
+  User     User              @relation(fields: [userId], references: [id])
 }
-enum AuthType {
+model User {
+  id          Int          @default(autoincrement()) @id
+  name        String?
+  phoneNumber String?      @unique
+  password    String?
+  birthday    DateTime?
+  gender      User_gender?
+  height      Int?
+  weight      Int?
+  isGlasses   Boolean?
+  isTattoo    Boolean?
+  isDyeing    Boolean?
+  createdAt   DateTime?    @default(now())
+  updatedAt   DateTime?    @default(now()) @updatedAt
+  deletedAt   DateTime?
+  profile     Profile?
+}
+
+enum Profile_authType {
   email
   facebook
   google
   apple
 }
-model Profile {
-  id                     Int                     @default(autoincrement()) @id
-  socialId               String?
-  authType               AuthType?
-  userId                 String                  @unique
-  User                   User                    @relation(fields: [userId], references: [id])
+enum User_gender {
+  male
+  female
 }
-
-model User {
-  id           String       @default(cuid()) @id
-  name         String?
-  phoneNumber  String?      @unique
-  password     String?
-  birthday     DateTime?
-  gender       Gender?
-  height       Int?
-  weight       Int?
-  isGlasses    Boolean?     @default(dbgenerated())
-  isTattoo     Boolean?     @default(dbgenerated())
-  isDyeing     Boolean?     @default(dbgenerated())
-  createdAt    DateTime?    @default(now())
-  updatedAt    DateTime?    @default(now()) @updatedAt
-  deletedAt    DateTime?
-
-  profile      Profile?
-}
```


