# Migration `20201008085732-exion`

This migration has been generated by 권수현 at 10/8/2020, 5:57:32 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `Profile` (
`id` int  NOT NULL  AUTO_INCREMENT,
`socialId` varchar(191)  ,
`authType` ENUM('email', 'facebook', 'google', 'apple')  ,
`userId` int  NOT NULL ,
UNIQUE INDEX `Profile.userId_unique`(`userId`),
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `Admin` (
`id` int  NOT NULL  AUTO_INCREMENT,
`userName` varchar(191)  ,
`password` varchar(191)  ,
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `User` (
`id` int  NOT NULL  AUTO_INCREMENT,
`phoneNumber` varchar(191)  ,
`password` varchar(191)  ,
`name` varchar(191)  ,
`photoURL` varchar(191)  ,
`photoURL2` varchar(191)  ,
`birthday` datetime(3)  ,
`gender` ENUM('male', 'female')  ,
`height` int  ,
`weight` int  ,
`isGlasses` boolean  ,
`isTattoo` boolean  ,
`isDyeing` boolean  ,
`createdAt` datetime(3)  DEFAULT CURRENT_TIMESTAMP(3),
`updatedAt` datetime(3)  DEFAULT CURRENT_TIMESTAMP(3),
`deletedAt` datetime(3)  ,
`lastSignedIn` datetime(3)  ,
UNIQUE INDEX `User.phoneNumber_unique`(`phoneNumber`),
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `Shooting` (
`id` int  NOT NULL  AUTO_INCREMENT,
`title` varchar(191)  ,
`producer` varchar(191)  ,
`shootingStartAt` datetime(3)  ,
`shootingEndAt` datetime(3)  ,
`content` varchar(191)  ,
`wage` int  ,
`meetingPlace` varchar(191)  ,
`meetingTime` datetime(3)  ,
`gender` ENUM('male', 'female')  ,
`minHeight` int  ,
`maxHeight` int  ,
`minWeight` int  ,
`maxWeight` int  ,
`isGlasses` boolean  ,
`isTattoo` boolean  ,
`isDyeing` boolean  ,
`step` ENUM('screening', 'toBeShooting', 'inShooting', 'shootingComplete', 'paymentCompleted')  NOT NULL ,
`createdAt` datetime(3)  DEFAULT CURRENT_TIMESTAMP(3),
`updatedAt` datetime(3)  DEFAULT CURRENT_TIMESTAMP(3),
`deletedAt` datetime(3)  ,
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `Schedule` (
`id` int  NOT NULL  AUTO_INCREMENT,
`shootingId` int  NOT NULL ,
`userId` int  NOT NULL ,
`type` ENUM('fail', 'waiting', 'pass', 'attending', 'cancel')  ,
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `Bookmark` (
`createdAt` datetime(3)  DEFAULT CURRENT_TIMESTAMP(3),
`userId` int  NOT NULL ,
`shootingId` int  NOT NULL ,
PRIMARY KEY (`userId`,`shootingId`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `Profile` ADD FOREIGN KEY (`userId`) REFERENCES `exion`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `Schedule` ADD FOREIGN KEY (`userId`) REFERENCES `exion`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `Schedule` ADD FOREIGN KEY (`shootingId`) REFERENCES `exion`.`Shooting`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `Bookmark` ADD FOREIGN KEY (`userId`) REFERENCES `exion`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `Bookmark` ADD FOREIGN KEY (`shootingId`) REFERENCES `exion`.`Shooting`(`id`) ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200918014312-exion..20201008085732-exion
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
 model Profile {
   id                Int                 @default(autoincrement()) @id
@@ -13,8 +13,14 @@
   authType          Profile_authType? 
   userId            Int                 @unique
   User              User                @relation(fields: [userId], references: [id])
 }   
+
+model Admin {
+  id                Int                 @default(autoincrement()) @id
+  userName          String?
+  password          String?    
+}
 model User {    
   id                Int                 @default(autoincrement()) @id
   phoneNumber       String?             @unique
@@ -46,16 +52,19 @@
   shootingStartAt   DateTime?
   shootingEndAt     DateTime?
   content           String?  
   wage              Int?
+  meetingPlace      String? 
+  meetingTime       DateTime?
   gender            User_gender?        
   minHeight         Int?        
   maxHeight         Int?        
   minWeight         Int?        
   maxWeight         Int?        
   isGlasses         Boolean?        
   isTattoo          Boolean?        
   isDyeing          Boolean? 
+  step              Step
   createdAt         DateTime?           @default(now())
   updatedAt         DateTime?           @default(now()) @updatedAt
   deletedAt         DateTime?
@@ -63,12 +72,12 @@
   schedule          Schedule[]
 }
 model Schedule {
-  id                Int                 @default(autoincrement()) @id  
-  step              Step
+  id                Int                 @default(autoincrement()) @id
   shootingId        Int                 
   userId            Int
+  type              Schedule_Type?
   User              User                @relation(fields: [userId], references: [id])
   Shooting          Shooting            @relation(fields: [shootingId], references: [id])
 }
@@ -100,4 +109,12 @@
   inShooting
   shootingComplete
   paymentCompleted
 }
+
+enum Schedule_Type {
+  fail
+  waiting
+  pass
+  attending
+  cancel
+}
```


